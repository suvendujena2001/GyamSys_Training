<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Vertical Navbar -->
            <div class="col-md-2">
                <nav
                    class="navbar navbar-expand-md navbar-dark bg-dark rounded flex-md-column flex-row align-items-start fixed-left">
                    <a class="navbar-brand" routerLink="/home" routerLinkActive="active">Welcome</a>
                    <div class="d-flex flex-row justify-content-between align-items-center w-100">
                        <div class="text-light mx-4">{{username}}</div>
                        <div class="btn btn-danger" (click)="Logout()">LogOut</div>
                    </div>
                    <div id="navbarNav ">
                        <ul class="navbar-nav flex-column m-3 text-center">
                            <li class="nav-item">
                                <a class="nav-link" routerLink="/home" routerLinkActive="active">Home</a>
                            </li>
                            <li class="nav-item">
                                <div><a class="nav-link" routerLink="/userComments" routerLinkActive="active">My
                                        comments</a>
                                </div>
                            </li>

                            <!-- Add more fields as needed -->
                        </ul>
                    </div>
                </nav>
            </div>

            <!-- Book Cards -->
            <div class="col-md-9">
                <div class="row">

                    <!-- Search Bar -->
                    <div class="backGnd">
                        <div class="col-md-12 mt-3">
                            <h1 class="title">Book Review System</h1>
                            <form class="form-inline my-2 my-lg-0">
                                <div class="input-group">
                                    <!-- <input class="form-control mr-sm-2" id="search_box" type="search" placeholder="Search" aria-label="Search"> -->
                                    <br><br><br>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- Example Card (Repeat this for each book) -->
                    <div class="container">
                        <div class="row">
                            <div class="col-md-7" *ngFor="let b of book">
                                <div class="card mb-3  text-center">
                                    <img [src]="b.imageUrl_L" class="card-img-top custom-img m-2 " alt="Book Cover">
                                    <div class="card-body">
                                        <h5 class="card-title" style="font-size: 0.8rem;">{{ b.bookTitle }}</h5>
                                        <p class="card-text" style="font-size: 0.7rem;">ISBN: {{ b.isbn }}</p>
                                        <p class="card-text" style="font-size: 0.7rem;">Author: {{ b.bookAuthor }}</p>
                                        <p class="card-text" style="font-size: 0.7rem;">Year of Publication: {{
                                            b.yearOfPublication }}</p>
                                        <p class="card-text" style="font-size: 0.7rem;">Publisher: {{ b.publisher }}</p>
                                        <p class="card-text" style="font-size: 0.7rem;">Total Likes: {{ b.totalLikes }}
                                        </p>
                                        <p class="card-text" style="font-size: 0.7rem;">Average Rating: {{
                                            b.averageRating }}</p>
                                        <button class="btn btn-dark" (click)="toggleLike(b)">
                                            {{ b.likedByCurrentUser ? 'Unlike' : 'Like' }}
                                        </button>
                                        <div id="rating ">
                                            <span *ngFor="let rating of [1, 2, 3, 4, 5]" (click)="rateBook(b, rating)"
                                                [class.selected]="b.selectedRating >= rating"
                                                [class.filled]="b.selectedRating >= rating">&#9733;</span>
                                        </div>
                                        <textarea class="form-control" rows="3" [(ngModel)]="newComment"></textarea>
                                        <button class="btn btn-dark mt-2 " (click)="addComment(newComment)">Post
                                            Comment</button>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="m-2 text-center">
                        <h2>Previous Comments</h2>
                        <div class="row row_container justify-content-center m-3">
                            <!-- Add justify-content-center class -->
                            <div class=" col-md-8 mx-2">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col">S.No.</th>
                                            <th scope="col">Rating</th>
                                            <th scope="col">Comments</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let comment of bookComment; let i=index">
                                            <th scope="row">{{ i+1 }}</th>
                                            <td>{{ comment.rating }}</td>
                                            <td>{{ comment.comments }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Repeat card for each book -->
        </div>
    </div>
</body>